{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport api from \"../interceptor\";\nimport { useNavigate } from \"react-router-dom\";\nconst UseInterceptors = () => {\n  _s();\n  const navigator = useNavigate();\n  //let [isValid, setIsvalid] = useState(false)\n  useEffect(() => {\n    const axiosRequestInterceptor = api.interceptors.request.use(config => {\n      const token = localStorage.getItem('token'); // Ваш токен аутентификации\n      config.headers.Authorization = `Bearer ${token}`; // Добавление заголовка Authorization\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n    const axiosResponseInterceptor = api.interceptors.response.use(response => response, error => {\n      if (error.response.status === 401) {\n        localStorage.clear();\n        if (window.location.pathname !== \"/\") {\n          navigator(\"/\");\n        }\n      }\n      if (error.response.status === 406) {\n        navigator(\"/error_page?statusCode=406&errorMessage=Эта страница недоступна для Вас\");\n      }\n      return Promise.reject(error);\n    });\n    //setIsvalid(true)\n    return () => {\n      api.interceptors.request.eject(axiosRequestInterceptor);\n      api.interceptors.response.eject(axiosResponseInterceptor);\n    };\n  }, [navigator]);\n  return api;\n};\n_s(UseInterceptors, \"XwGFUYORZbTPyzinRxEYG8OBqy0=\", false, function () {\n  return [useNavigate];\n});\n_c = UseInterceptors;\nexport default UseInterceptors;\nvar _c;\n$RefreshReg$(_c, \"UseInterceptors\");","map":{"version":3,"names":["useEffect","api","useNavigate","UseInterceptors","_s","navigator","axiosRequestInterceptor","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","axiosResponseInterceptor","response","status","clear","window","location","pathname","eject","_c","$RefreshReg$"],"sources":["C:/Users/Розалия/Desktop/RILI_metauniverse/front_end/src/hooks/UseInterceptor.js"],"sourcesContent":["import {useEffect} from \"react\";\r\nimport api from \"../interceptor\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nconst UseInterceptors = ()=>{\r\n    const navigator = useNavigate()\r\n    //let [isValid, setIsvalid] = useState(false)\r\n    useEffect(()=>{\r\n        const axiosRequestInterceptor = api.interceptors.request.use(config => {\r\n                 const token =  localStorage.getItem('token')// Ваш токен аутентификации\r\n                 config.headers.Authorization = `Bearer ${token}` // Добавление заголовка Authorization\r\n                 return config\r\n               }, error => {\r\n                 return Promise.reject(error)\r\n               })\r\n        const axiosResponseInterceptor =  api.interceptors.response.use(\r\n               (response) => response,\r\n               (error) => {\r\n                 if (error.response.status === 401) {\r\n                   localStorage.clear(); \r\n                   if(window.location.pathname !== \"/\"){\r\n                      navigator(\"/\")\r\n                   }\r\n               }\r\n               if (error.response.status === 406) {\r\n                 navigator(\"/error_page?statusCode=406&errorMessage=Эта страница недоступна для Вас\")\r\n               }\r\n               return Promise.reject(error)\r\n            \r\n             })\r\n             //setIsvalid(true)\r\n             return () => {\r\n                api.interceptors.request.eject(axiosRequestInterceptor)\r\n                api.interceptors.response.eject(axiosResponseInterceptor)\r\n              }\r\n        },[navigator])\r\n\r\n    return api\r\n}\r\n\r\nexport default UseInterceptors"],"mappings":";AAAA,SAAQA,SAAS,QAAO,OAAO;AAC/B,OAAOC,GAAG,MAAM,gBAAgB;AAChC,SAASC,WAAW,QAAQ,kBAAkB;AAG9C,MAAMC,eAAe,GAAGA,CAAA,KAAI;EAAAC,EAAA;EACxB,MAAMC,SAAS,GAAGH,WAAW,CAAC,CAAC;EAC/B;EACAF,SAAS,CAAC,MAAI;IACV,MAAMM,uBAAuB,GAAGL,GAAG,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;MAC9D,MAAMC,KAAK,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC5CH,MAAM,CAACI,OAAO,CAACC,aAAa,GAAI,UAASJ,KAAM,EAAC,EAAC;MACjD,OAAOD,MAAM;IACf,CAAC,EAAEM,KAAK,IAAI;MACV,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAC9B,CAAC,CAAC;IACT,MAAMG,wBAAwB,GAAIlB,GAAG,CAACM,YAAY,CAACa,QAAQ,CAACX,GAAG,CACvDW,QAAQ,IAAKA,QAAQ,EACrBJ,KAAK,IAAK;MACT,IAAIA,KAAK,CAACI,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;QACjCT,YAAY,CAACU,KAAK,CAAC,CAAC;QACpB,IAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,GAAG,EAAC;UACjCpB,SAAS,CAAC,GAAG,CAAC;QACjB;MACJ;MACA,IAAIW,KAAK,CAACI,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;QACjChB,SAAS,CAAC,yEAAyE,CAAC;MACtF;MACA,OAAOY,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAE9B,CAAC,CAAC;IACF;IACA,OAAO,MAAM;MACVf,GAAG,CAACM,YAAY,CAACC,OAAO,CAACkB,KAAK,CAACpB,uBAAuB,CAAC;MACvDL,GAAG,CAACM,YAAY,CAACa,QAAQ,CAACM,KAAK,CAACP,wBAAwB,CAAC;IAC3D,CAAC;EACP,CAAC,EAAC,CAACd,SAAS,CAAC,CAAC;EAElB,OAAOJ,GAAG;AACd,CAAC;AAAAG,EAAA,CAlCKD,eAAe;EAAA,QACCD,WAAW;AAAA;AAAAyB,EAAA,GAD3BxB,eAAe;AAoCrB,eAAeA,eAAe;AAAA,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}